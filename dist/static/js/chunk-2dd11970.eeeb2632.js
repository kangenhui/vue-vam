(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dd11970"],{"1dae":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"title"},[t._v("实名认证")]),i("div",{staticClass:"header"},[i("el-steps",{staticClass:"steps",attrs:{active:t.active,"finish-status":"success"}},[i("el-step",{attrs:{title:"上传身份证"}}),i("el-step",{attrs:{title:"实人检测"}}),i("el-step",{attrs:{title:"等待结果"}})],1)],1),t.isPhoto?t._e():i("div",[i("div",{staticClass:"middle"},[i("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[t.imgPositive?i("div",{staticClass:"card-text"},[i("img",{attrs:{src:t.imgPositive},on:{click:function(e){return t.toPhotograph(1)}}})]):i("div",{staticClass:"card-text"},[t._v(" 上传身份证（人面面） "),i("el-button",{attrs:{icon:"el-icon-plus",circle:""},on:{click:function(e){return t.toPhotograph(1)}}})],1)]),i("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[t.imgNegative?i("div",{staticClass:"card-text"},[i("img",{attrs:{src:t.imgNegative},on:{click:function(e){return t.toPhotograph(2)}}})]):i("div",{staticClass:"card-text"},[t._v(" 上传身份证（国徽面） "),i("el-button",{attrs:{icon:"el-icon-plus",circle:""},on:{click:function(e){return t.toPhotograph(2)}}})],1)])],1),i("div",{staticClass:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.toVideo}},[t._v("下一步")])],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isPhoto,expression:"isPhoto"}],staticClass:"photo"},[i("video",{ref:"video",attrs:{playsinline:"false","webkit-playsinline":"false"}}),i("el-button",{attrs:{type:"danger"},on:{click:t.setImage}},[t._v("确 认 拍 照")])],1)])},a=[],o=(i("7f7f"),{name:"photograph",data:function(){return{bodyStyle:{height:"100px"},active:0,imgPositive:void 0,imgNegative:void 0,isPhoto:!1,isVideo:!1,front:0,mediaStreamTrack:{},canvas:null,context:null,cameras:[],isPlay:!1}},computed:{},watch:{},filters:{},mounted:function(){this.loadCameras()},created:function(){},methods:{toPhotograph:function(t){this.isPlay||(console.log("play()执行"),this.$refs.video.play(),this.isPlay=!0),this.isPhoto=!0,this.front=t},toText:function(){this.$router.push("/demo2")},toios:function(){this.$router.push("/cameraCanvas")},toVideo:function(){void 0!=this.imgNegative&&void 0!=this.imgNegative?((this.base64ToSize(this.imgNegative)>1048576||this.base64ToSize(this.imgPositive)>1048576)&&this.$message.error("图片大小超过1MB,请重新拍照上传"),this.activa=1,this.isPlay=!1,this.stopPhoto(),this.$router.push("/cameraCanvas")):this.$message.error("请完成当前操作")},base64ToSize:function(t){var e=t.indexOf("=");t=-1!=e?t.substring(0,e):t;var i=t.length;return i-i/8*2},loadCameras:function(){var t=this;navigator.mediaDevices.enumerateDevices().then((function(e){e.forEach((function(e){"videoinput"===e.kind&&(console.log(e),alert(e.label),t.cameras.push(e.deviceId))})),t.getCamera()})).catch((function(t){console.log(t.name+": "+t.message)}))},getCamera:function(){var t=this,e=1===this.cameras.length?this.cameras[0]:this.cameras[1];this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:{exact:e}}}).then((function(e){t.mediaStreamTrack="function"===typeof e.stop?e:e.getTracks()[0],t.$refs.video.srcObject=e,console.log("视频流对象")})).catch((function(t){console.log(t)})),console.log("相机加载完毕")},setImage:function(){var t=this.$refs.video;this.context.drawImage(t,0,0,300,150);var e=this.canvas.toDataURL("image/jpeg");1===this.front?this.imgPositive=e:this.imgNegative=e,this.isPhoto=!1},stopPhoto:function(){this.$refs.video.srcObject.getTracks()[0].stop()}}}),c=o,n=(i("daf1"),i("2877")),r=Object(n["a"])(c,s,a,!1,null,null,null);e["default"]=r.exports},a9f4:function(t,e,i){},daf1:function(t,e,i){"use strict";i("a9f4")}}]);